import {
  i
} from "./chunk-NCP6KRCP.js";
import {
  n
} from "./chunk-6W3EMI7P.js";
import {
  Box_default,
  ButtonBase_default,
  Controller,
  ImageList_default,
  Typography_default,
  e,
  require_get,
  styled_default,
  useMediaQuery,
  useTheme
} from "./chunk-NOLI35SV.js";
import {
  require_react
} from "./chunk-2EXEP7CN.js";
import {
  __toESM
} from "./chunk-WXXH56N5.js";

// node_modules/@jeremyling/react-material-ui-form-builder/dist/es/StandardImagePicker.js
var import_get = __toESM(require_get());
var import_react = __toESM(require_react());
var m = function() {
  return m = Object.assign || function(e2) {
    for (var t2, r2 = 1, i3 = arguments.length; r2 < i3; r2++)
      for (var n3 in t2 = arguments[r2])
        Object.prototype.hasOwnProperty.call(t2, n3) && (e2[n3] = t2[n3]);
    return e2;
  }, m.apply(this, arguments);
};
var g = function(e2, t2, r2) {
  if (r2 || 2 === arguments.length)
    for (var i3, n3 = 0, o2 = t2.length; n3 < o2; n3++)
      !i3 && n3 in t2 || (i3 || (i3 = Array.prototype.slice.call(t2, 0, n3)), i3[n3] = t2[n3]);
  return e2.concat(i3 || Array.prototype.slice.call(t2));
};
function b() {
  return { width: window.innerWidth, height: window.innerHeight };
}
var h = function() {
  return h = Object.assign || function(e2) {
    for (var t2, r2 = 1, i3 = arguments.length; r2 < i3; r2++)
      for (var n3 in t2 = arguments[r2])
        Object.prototype.hasOwnProperty.call(t2, n3) && (e2[n3] = t2[n3]);
    return e2;
  }, h.apply(this, arguments);
};
var y = function(e2, t2, r2) {
  if (r2 || 2 === arguments.length)
    for (var i3, n3 = 0, o2 = t2.length; n3 < o2; n3++)
      !i3 && n3 in t2 || (i3 || (i3 = Array.prototype.slice.call(t2, 0, n3)), i3[n3] = t2[n3]);
  return e2.concat(i3 || Array.prototype.slice.call(t2));
};
var j = styled_default("div")(function() {
  return { display: "flex", flexWrap: "wrap", justifyContent: "space-around", overflow: "hidden", cursor: "pointer" };
});
var w = styled_default(ImageList_default)(function() {
  return { width: "100%", marginBottom: "2px !important", transform: "translateZ(0)" };
});
var C = styled_default("div")(function() {
  return { display: "inline-block", position: "relative", margin: "2px", width: "100%" };
});
var L = styled_default("div")(function(e2) {
  var t2, r2, i3 = e2.fieldConfig;
  return { marginTop: "".concat(Number((null === (t2 = i3.aspectRatio) || void 0 === t2 ? void 0 : t2[1]) || 1) / Number((null === (r2 = i3.aspectRatio) || void 0 === r2 ? void 0 : r2[0]) || 1) * 100, "%") };
});
var O = styled_default(Box_default)(function() {
  return { position: "absolute", inset: 0 };
});
var k = styled_default("img")(function() {
  return { borderRadius: "4px", objectFit: "contain", width: "100%", height: "100%", pointerEvents: "none" };
});
var A = styled_default("div")(function(e2) {
  var t2 = e2.fieldConfig;
  return { margin: "4px", overflow: "hidden", height: (t2.labelLines || 2) * (T(t2) + 2) };
});
var P = styled_default(Typography_default)(function(e2) {
  var t2 = e2.fieldConfig;
  return { display: "-webkit-box", boxOrient: "vertical", lineClamp: t2.labelLines, lineHeight: "".concat(T(t2) + 2, "px"), textAlign: "center" };
});
var z = styled_default("div")(function(e2) {
  var t2 = e2.fieldConfig;
  return { margin: "4px", overflow: "hidden", height: (t2.subLabelLines || 2) * (K(t2) + 2) };
});
var S = styled_default(Typography_default)(function(e2) {
  var t2 = e2.fieldConfig;
  return { display: "-webkit-box", boxOrient: "vertical", lineClamp: t2.subLabelLines || 2, lineHeight: "".concat(K(t2) + 2, "px"), textAlign: "center" };
});
var T = function(e2) {
  var t2, r2, i3, n3;
  return (null === (r2 = null === (t2 = e2.labelProps) || void 0 === t2 ? void 0 : t2.style) || void 0 === r2 ? void 0 : r2.fontSize) ? Number(String(null === (n3 = null === (i3 = e2.labelProps) || void 0 === i3 ? void 0 : i3.style) || void 0 === n3 ? void 0 : n3.fontSize).replace("px", "")) : 14;
};
var K = function(e2) {
  var t2, r2, i3, n3;
  return (null === (r2 = null === (t2 = e2.subLabelProps) || void 0 === t2 ? void 0 : t2.style) || void 0 === r2 ? void 0 : r2.fontSize) ? Number(String(null === (n3 = null === (i3 = e2.subLabelProps) || void 0 === i3 ? void 0 : i3.style) || void 0 === n3 ? void 0 : n3.fontSize).replace("px", "")) : 14;
};
function E(d) {
  var c = d.field, f = d.methods, T2 = f.control;
  f.getValues;
  var K2 = f.setValue;
  f.trigger;
  var E2 = f.formState.errors, V = d.hideTitle, H = useTheme(), N = function() {
    var e2 = useTheme(), t2 = g([], e2.breakpoints.keys, true), n3 = (0, import_react.useState)(b()), o2 = n3[0], l = n3[1];
    (0, import_react.useEffect)(function() {
      function e3() {
        l(b());
      }
      return window.addEventListener("resize", e3), function() {
        return window.removeEventListener("resize", e3);
      };
    }, []);
    var u = t2.reduce(function(t3, r2) {
      var i3 = e2.breakpoints.up(r2);
      return useMediaQuery(i3) ? r2 : t3;
    }, "xs");
    return m({ widthType: u }, o2);
  }().widthType, R = (0, import_react.useMemo)(function() {
    return c.getValueKey ? c.getValueKey : function(e2) {
      return (null == e2 ? void 0 : e2.label) || (null == e2 ? void 0 : e2.src);
    };
  }, [c.getValueKey]), I = (0, import_react.useMemo)(function() {
    return c.getOptionKey ? c.getOptionKey : function(e2) {
      return (null == e2 ? void 0 : e2.label) || (null == e2 ? void 0 : e2.src);
    };
  }, [c.getOptionKey]), W = function(e2, t2) {
    if (c.multiple && Array.isArray(t2)) {
      var r2 = null == t2 ? void 0 : t2.findIndex(function(t3) {
        return R(t3) === I(e2);
      });
      if (r2 >= 0) {
        var i3 = y([], t2, true);
        return i3.splice(r2, 1), 0 === i3.length && (i3 = void 0), void K2(c.attribute, i3);
      }
      K2(c.attribute, y(y([], t2 || [], true), [e2], false));
    } else {
      if (R(t2) === I(e2))
        return void K2(c.attribute, void 0);
      K2(c.attribute, e2);
    }
  }, B = function(e2, t2, r2) {
    return e2.multiple && Array.isArray(r2) ? (null == r2 ? void 0 : r2.findIndex(function(e3) {
      return R(e3) === I(t2);
    })) >= 0 : R(r2) === I(t2);
  }, D = function(e2) {
    return e2.groupContainerProps;
  };
  return e.exports.jsx(Controller, { name: c.attribute, control: T2, render: function(r2) {
    var i3, n3, l, a, d2 = r2.field;
    return e.exports.jsxs(import_react.Fragment, { children: [!V && c.title && e.exports.jsx(n, { field: c }), e.exports.jsx(j, { children: e.exports.jsx(w, h({}, D(c), { cols: (l = c.imageCols, a = h({}, l || { xs: 2 }), a.sm = (null == l ? void 0 : l.sm) || a.xs, a.md = (null == l ? void 0 : l.md) || a.sm, a.lg = (null == l ? void 0 : l.lg) || a.md, a.xl = (null == l ? void 0 : l.xl) || a.lg, a)[N], rowHeight: "auto" }, { children: null === (i3 = c.images) || void 0 === i3 ? void 0 : i3.map(function(t2, r3) {
      return e.exports.jsxs(ButtonBase_default, h({}, function(e2, t3, r4) {
        var i4;
        return h(h({ id: e2.id || e2.attribute, sx: { width: "calc(100% - ".concat(B(e2, t3, r4) ? "12px" : "8px", ")"), margin: "2px", border: B(e2, t3, r4) ? "2px solid ".concat(H.palette.primary.main) : void 0, borderRadius: "4px", flexDirection: "column" } }, e2.props), { component: "div", onClick: (null === (i4 = e2.props) || void 0 === i4 ? void 0 : i4.onClick) ? e2.props.onClick(t3, r4) : function() {
          return W(t3, r4);
        } });
      }(c, t2, d2.value), { children: [e.exports.jsxs(C, { children: [e.exports.jsx(L, { fieldConfig: c }), e.exports.jsx(O, h({}, c.imageProps, { children: t2.customComponent ? e.exports.jsx(Box_default, h({ sx: { display: "flex", alignItems: "center", justifyContent: "center", width: "100%", height: "100%" } }, { children: t2.customComponent })) : e.exports.jsx(k, { src: t2.src, alt: t2.alt || t2.label, title: t2.label || t2.alt, loading: "lazy" }) }))] }), t2.label && e.exports.jsx(A, h({ fieldConfig: c }, { children: e.exports.jsx(P, h({ fieldConfig: c }, c.labelProps, { children: t2.label })) })), t2.subLabel && e.exports.jsx(z, h({ fieldConfig: c }, { children: e.exports.jsx(S, h({ fieldConfig: c }, c.subLabelProps, { children: t2.subLabel })) }))] }), r3);
    }) })) }), !!(0, import_get.default)(E2, c.attribute) && e.exports.jsx(i, { error: null === (n3 = (0, import_get.default)(E2, c.attribute)) || void 0 === n3 ? void 0 : n3.message })] });
  } });
}

export {
  E
};
//# sourceMappingURL=chunk-MZ3EYSFG.js.map
